<link rel="stylesheet" href="styles/results.css">

<p>This is a results page</p>

{{#if Spotify.topArtistsFourWeeks}}  
    <div id="top-artists-container" class="spotify-results">
        <h1>Top Artists - Four Weeks</h1>
        {{> spotify-results obj=Spotify.topArtistsFourWeeks }}
    </div>
{{/if}}

{{#if Spotify.topArtistsSixMonths}}  
    <div id="top-artists-container" class="spotify-results">
        <h1>Top Artists - Six Months</h1>
        {{> spotify-results obj=Spotify.topArtistsSixMonths }}
    </div>
{{/if}}

{{#if Spotify.topArtistsAllTime}}  
    <div id="top-artists-container" class="spotify-results">
        <h1>Top Artists - All Time</h1>
        {{> spotify-results obj=Spotify.topArtistsAllTime }}
    </div>
{{/if}}


{{#if Spotify.topTracksFourWeeks}}
    <div id="top-songs-container" class="spotify-results">
        <h1>Top Songs - Four Weeks</h1> 
        {{> spotify-results obj=Spotify.topTracksFourWeeks }}
    </div>      
{{/if}}

{{#if Spotify.topTracksSixMonths}}
    <div id="top-songs-container" class="spotify-results">
        <h1>Top Songs - Six Months</h1>
        {{> spotify-results obj=Spotify.topTracksSixMonths }}
    </div>      
{{/if}}


{{#if Spotify.topTracksAllTime}}
    <div id="top-songs-container" class="spotify-results">
        <h1>Top Songs - All Time</h1>
        {{> spotify-results obj=Spotify.topTracksAllTime }}
    </div>      
{{/if}}



<script>
    if (window.location.href.indexOf('?') > -1) {
        (function parseQueryString() {
            function getParameterByName(name, url) {
                if (!url) url = window.location.href;
                name = name.replace(/[\[\]]/g, "\\$&");
                var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, " "));
            }
            if (!Token.getValidAccessToken()) {
                var accessToken = getParameterByName('access_token');
                accessToken ? Token.setAccessToken(accessToken) : console.error('access token is ' + accessToken + ', did you change the name of the query string param?');
            }
            if (!Token.getRefreshToken()) {
                var refreshToken = getParameterByName('refresh_token');
                refreshToken ? Token.setRefreshToken(refreshToken) : console.error('refresh token is ' + refreshToken + ', did you change the name of the query string param?');
            }
            if (!Token.getAccessTokenExpiry()) {
                var expiry = getParameterByName('expiry_in');
                expiry ? Token.setAccessTokenExpiry(expiry) : console.error('expiry time is ' + expiry + ', did you change the name of the query string param?');
            }
        }());
    }
</script>